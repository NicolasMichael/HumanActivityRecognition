##Getting and Cleaning Data Assignment
###Human Activity Recognition

The purpose of this assignment is to use the data sets generated by smartphones in an experiment and summarise the data by subject and by activity for all measurements that are related to the mean and standard deviation.  All other measurements are ignored for the purpose of this specific data analysis.
The repository contains two R scripts:
*download_analysis_data.R
*run_analysis.R

###download_analysis_data.R

The purpose of this R script is to download the zip file that contains the data sets required for the analysis from this URL:-
https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip 

The script first checks if the file already exists in the user’s working directory.  If it exists it informs the user that the file already exists otherwise downloads the zip file in the user’s working directory.

###run_analysis.R

The script will run provided that the zip file named “UCI HAR Dataset.zip” is already downloaded in the user’s working directory.

The first section of the script is concerned with dimensioning the variables that will be used in accessing the data files in the zip file.

The following data files will be used for both the training and test data:
*Activity Labels that describe each activity performed on the subjects.
*Features that describe all measurements performed.

Then for both training and test data the script will access the files that contain:
*The subjects “subject_train/test.txt”
*What activities “y_train/test.txt”
*The measurements of each subject in each activity “X_train.test.txt”.

The next section of the script will check to see if the zip file already exists in the user’s working directory.  If not the function will stop and the user will be prompted to either download the zip file from the url that is provided in the message or to use the function “download_analysis_data.R” to download the zip file automatically in the working directory.

If the file exists in the user’s working directory, the function will then load the general data the activities list and the features list.

The activities list is a two column data frame with column names “Activity ID” and “ActivityDesc”.  The reason why column names were provided is that the column “Activity Desc” will be later merged with the training and test activities text files. These files only contain the number of the activity performed.  If only this information is allowed to go through, the summarised data will be harder for the analyst to understand.  On the contrary if the activity description is provided the analysis will be easier later for the analyst.

The features list is a two column data frame.  This data frame will provide the column names when the measurement data sets will be loaded.

Then the function will proceed to load the main data sets starting first with the training data, then with the test data.  The cleaning procedure described below applies both for the training and test data.

The main data set with the observations is loaded, with the column names being the second column of the features list data frame. In addition the check names argument is set to false so that the illegal characters “(“, “)” and “-“ are not lost when the data frame is loaded.

Next the activities list is loaded into a data frame with the column name “Activity ID”.

After the activities list, the subjects list is loaded into a data frame with column name “Subject”.

Finally a character vector is created that will be added to the clean data set in the form of a flag.  For the training data the flag will be “Train” and for the test data the flag will be “Test”.  This could potentially be useful in the final summarised data set to distinguish between the training and test activities.

Next the script will merge the general activities list with the activities list of training and test, using the column “Activity ID”.  The name of the activity rather than the number key will be loaded to the final summarised data set, as this would be more meaningful to the analyst.

As per the requirements of the analysis not all variables are required for the final summarised data set.  Only the variables that are related to the mean and standard deviation are required.  Therefore we need to subset the observations data set loaded before to hold only those variables that are mean and standard deviation related.  To subset the script the grep function is used to search for the patterns “mean()” and “std()” in the data frame column names.

Now the three main data frames along with the flag character vector are ready to be merged into one subset (one for the training and one for the test activities):
*Flag character vector (Train or Test) in column one (1).
*Subjects in column two (2).
*Activities performed in column three (3).
*The observations related to mean and standard deviation in the rest of the columns.

To merge all data frames and the character vector the function “cbind” is used.

When both the training and test data sets are cleaned as described above one data set named “cleanSet” will be created using the “rbind” function.

Then further process is carried to summarise the “cleanSet” as per the requirements of the analysis, i.e. calculating the average of each variable for each activity and for each subject.  This is achieved using the “aggregate” function.  The “aggregate” function will calculate the average and prepare the final summarised clean data set as follows:
*An average is not required for all columns because in the main observations set three non-numeric columns were added: flag, subject and activity description.  So the average will be calculated for columns starting from column four (4) until the end of the data set.  The end is determined using the “ncol()” function.
*The average will be calculated for the groups defined in the “list()” function, flag, subject and activity.

For presentation purposes the summarised final set is then ordered by subject and then by activity,

Finally the summarised final clean data set is written to a text file named “HAR Summarised Data.txt”.
